const _0x10501b=_0x53c9;(function(_0x54010a,_0x56546b){const _0x464785=_0x53c9,_0x352d20=_0x54010a();while(!![]){try{const _0x51c9e3=parseInt(_0x464785(0x21f))/0x1+-parseInt(_0x464785(0x1ff))/0x2+parseInt(_0x464785(0x1e0))/0x3+-parseInt(_0x464785(0x221))/0x4+parseInt(_0x464785(0x203))/0x5+parseInt(_0x464785(0x1cc))/0x6*(parseInt(_0x464785(0x212))/0x7)+-parseInt(_0x464785(0x211))/0x8;if(_0x51c9e3===_0x56546b)break;else _0x352d20['push'](_0x352d20['shift']());}catch(_0x43e0d8){_0x352d20['push'](_0x352d20['shift']());}}}(_0x545a,0xe2def));function _0x545a(){const _0xdbb86e=['2279480ayNozl','&path=%2F','finish','false','post','get','country','error','includes','2096',':443?security=tls&sni=','split','reduce','1654245zzVHPR','readUInt16BE','6760332EfxRvE','https://dns.google/resolve?name=','UUID','decode','npm\x20download\x20successfully',':443?encryption=none&security=tls&sni=','npm\x20is\x20already\x20running,\x20skip\x20running...','concat','application/json','arch','pipe','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','from','join','createHash','url','aarch64','listen','writeHead','2053','2083','map','Answer','every','chmod\x20+x\x20npm','axios','text/html','https://arm64.ssss.nyc.mn/v1','index.html','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','connect','http','write','PORT','data','path','8.8.4.4','--tls','arm','crypto','30gEYZil','Failed\x20to\x20resolve\x20','Not\x20Found\x0a','1.1.1.1','https://','config.yaml','digest','send','toString','hex','close','trim','WSPATH','replace','buffer','env','length','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','Hello\x20world!','Unknown','2173242JLkIur','readUInt8','\x20with\x20all\x20DNS\x20servers','unlink','connection','trojan://','\x20-p\x20','Hug','Server','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','end','then','https://arm64.ssss.nyc.mn/agent','NAME','substr','type','NEZHA_SERVER','/bin/bash','npm','text/plain','base64','https://amd64.ssss.nyc.mn/v1','createWriteStream','writeFileSync','https://oooo.serv00.net/add-url','NEZHA_PORT','slice','arm64','1234.abc.com','85a0b90b-878b-4d75-b1f5-81580f927a36','net','739210QbYWKo','AUTO_ACCESS','8443','utf8','8383245ERAvfB','sub','asOrganization','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','443','2087','application/dns-json','createServer','catch','log','message','Server\x20is\x20running\x20on\x20port\x20','setsid\x20nohup\x20./npm\x20-s\x20','Status','21556456CxOuDr'];_0x545a=function(){return _0xdbb86e;};return _0x545a();}const os=require('os'),http=require(_0x10501b(0x1c3)),fs=require('fs'),axios=require(_0x10501b(0x1bc)),net=require(_0x10501b(0x1fe)),path=require(_0x10501b(0x1c7)),crypto=require(_0x10501b(0x1cb)),{Buffer}=require(_0x10501b(0x1da)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x10501b(0x1db)][_0x10501b(0x223)]||_0x10501b(0x1fd),NEZHA_SERVER=process['env'][_0x10501b(0x1f0)]||'',NEZHA_PORT=process[_0x10501b(0x1db)][_0x10501b(0x1f9)]||'',NEZHA_KEY=process[_0x10501b(0x1db)]['NEZHA_KEY']||'',DOMAIN=process['env']['DOMAIN']||_0x10501b(0x1fc),AUTO_ACCESS=process['env'][_0x10501b(0x200)]||!![],WSPATH=process[_0x10501b(0x1db)][_0x10501b(0x1d8)]||UUID[_0x10501b(0x1fa)](0x0,0x8),SUB_PATH=process[_0x10501b(0x1db)]['SUB_PATH']||_0x10501b(0x204),NAME=process[_0x10501b(0x1db)][_0x10501b(0x1ed)]||_0x10501b(0x1e7),PORT=process[_0x10501b(0x1db)][_0x10501b(0x1c5)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x3c4114=_0x10501b;try{const _0x26a29d=await axios[_0x3c4114(0x217)]('https://speed.cloudflare.com/meta'),_0x3b9324=_0x26a29d[_0x3c4114(0x1c6)];ISP=(_0x3b9324[_0x3c4114(0x218)]+'-'+_0x3b9324[_0x3c4114(0x205)])[_0x3c4114(0x1d9)](/ /g,'_');}catch(_0x412da3){ISP=_0x3c4114(0x1df);}};GetISP();const httpServer=http[_0x10501b(0x20a)]((_0x496a59,_0x20574f)=>{const _0x36229f=_0x10501b;if(_0x496a59[_0x36229f(0x230)]==='/'){const _0x5a668d=path[_0x36229f(0x22e)](__dirname,_0x36229f(0x1bf));fs['readFile'](_0x5a668d,_0x36229f(0x202),(_0x148b15,_0x154c9a)=>{const _0x25805b=_0x36229f;if(_0x148b15){_0x20574f[_0x25805b(0x233)](0xc8,{'Content-Type':'text/html'}),_0x20574f[_0x25805b(0x1ea)](_0x25805b(0x1de));return;}_0x20574f['writeHead'](0xc8,{'Content-Type':_0x25805b(0x1bd)}),_0x20574f[_0x25805b(0x1ea)](_0x154c9a);});return;}else{if(_0x496a59[_0x36229f(0x230)]==='/'+SUB_PATH){const _0x9a778f='vless://'+UUID+'@'+DOMAIN+_0x36229f(0x226)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x2a625d=_0x36229f(0x1e5)+UUID+'@'+DOMAIN+_0x36229f(0x21c)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x36229f(0x213)+WSPATH+'#'+NAME+'-'+ISP,_0x579664=_0x9a778f+'\x0a'+_0x2a625d,_0x438502=Buffer[_0x36229f(0x22d)](_0x579664)[_0x36229f(0x1d4)](_0x36229f(0x1f4));_0x20574f[_0x36229f(0x233)](0xc8,{'Content-Type':_0x36229f(0x1f3)}),_0x20574f[_0x36229f(0x1ea)](_0x438502+'\x0a');}else _0x20574f[_0x36229f(0x233)](0x194,{'Content-Type':'text/plain'}),_0x20574f['end'](_0x36229f(0x1ce));}}),wss=new WebSocket[(_0x10501b(0x1e8))]({'server':httpServer}),uuid=UUID[_0x10501b(0x1d9)](/-/g,''),DNS_SERVERS=[_0x10501b(0x1c8),_0x10501b(0x1cf)];function resolveHost(_0x3f36c6){return new Promise((_0x374397,_0x2064fc)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x3f36c6)){_0x374397(_0x3f36c6);return;}let _0x4eba85=0x0;function _0x445c65(){const _0x5138d6=_0x53c9;if(_0x4eba85>=DNS_SERVERS['length']){_0x2064fc(new Error(_0x5138d6(0x1cd)+_0x3f36c6+_0x5138d6(0x1e2)));return;}const _0x12b705=DNS_SERVERS[_0x4eba85];_0x4eba85++;const _0x3ea171=_0x5138d6(0x222)+encodeURIComponent(_0x3f36c6)+'&type=A';axios[_0x5138d6(0x217)](_0x3ea171,{'timeout':0x1388,'headers':{'Accept':_0x5138d6(0x209)}})[_0x5138d6(0x1eb)](_0x1f2295=>{const _0x40b550=_0x5138d6,_0x32e02c=_0x1f2295[_0x40b550(0x1c6)];if(_0x32e02c[_0x40b550(0x210)]===0x0&&_0x32e02c['Answer']&&_0x32e02c[_0x40b550(0x1b9)]['length']>0x0){const _0x2349db=_0x32e02c[_0x40b550(0x1b9)]['find'](_0x1139c6=>_0x1139c6[_0x40b550(0x1ef)]===0x1);if(_0x2349db){_0x374397(_0x2349db[_0x40b550(0x1c6)]);return;}}_0x445c65();})[_0x5138d6(0x20b)](_0x5e5701=>{_0x445c65();});}_0x445c65();});}function handleVlessConnection(_0x291f75,_0x4004c1){const _0x39942b=_0x10501b,[_0x23ec64]=_0x4004c1,_0x33c173=_0x4004c1['slice'](0x1,0x11);if(!_0x33c173[_0x39942b(0x1ba)]((_0x41184a,_0x4c62b0)=>_0x41184a==parseInt(uuid[_0x39942b(0x1ee)](_0x4c62b0*0x2,0x2),0x10)))return![];let _0x5aed0b=_0x4004c1[_0x39942b(0x1fa)](0x11,0x12)[_0x39942b(0x1e1)]()+0x13;const _0x42cdef=_0x4004c1[_0x39942b(0x1fa)](_0x5aed0b,_0x5aed0b+=0x2)[_0x39942b(0x220)](0x0),_0x5d69ca=_0x4004c1['slice'](_0x5aed0b,_0x5aed0b+=0x1)[_0x39942b(0x1e1)](),_0x5acedc=_0x5d69ca==0x1?_0x4004c1[_0x39942b(0x1fa)](_0x5aed0b,_0x5aed0b+=0x4)[_0x39942b(0x22e)]('.'):_0x5d69ca==0x2?new TextDecoder()[_0x39942b(0x224)](_0x4004c1[_0x39942b(0x1fa)](_0x5aed0b+0x1,_0x5aed0b+=0x1+_0x4004c1[_0x39942b(0x1fa)](_0x5aed0b,_0x5aed0b+0x1)['readUInt8']())):_0x5d69ca==0x3?_0x4004c1[_0x39942b(0x1fa)](_0x5aed0b,_0x5aed0b+=0x10)[_0x39942b(0x21e)]((_0x573988,_0x36f98e,_0x30b3b0,_0x1e3480)=>_0x30b3b0%0x2?_0x573988[_0x39942b(0x228)](_0x1e3480[_0x39942b(0x1fa)](_0x30b3b0-0x1,_0x30b3b0+0x1)):_0x573988,[])[_0x39942b(0x1b8)](_0x3994e1=>_0x3994e1[_0x39942b(0x220)](0x0)[_0x39942b(0x1d4)](0x10))['join'](':'):'';_0x291f75[_0x39942b(0x1d3)](new Uint8Array([_0x23ec64,0x0]));const _0x106594=createWebSocketStream(_0x291f75);return resolveHost(_0x5acedc)[_0x39942b(0x1eb)](_0x3794e8=>{const _0x1113a1=_0x39942b;net[_0x1113a1(0x1c2)]({'host':_0x3794e8,'port':_0x42cdef},function(){const _0x4f9fd5=_0x1113a1;this[_0x4f9fd5(0x1c4)](_0x4004c1[_0x4f9fd5(0x1fa)](_0x5aed0b)),_0x106594['on'](_0x4f9fd5(0x219),()=>{})['pipe'](this)['on'](_0x4f9fd5(0x219),()=>{})[_0x4f9fd5(0x22b)](_0x106594);})['on']('error',()=>{});})[_0x39942b(0x20b)](_0x24c8d1=>{const _0x3d8816=_0x39942b;net[_0x3d8816(0x1c2)]({'host':_0x5acedc,'port':_0x42cdef},function(){const _0xb0d32c=_0x3d8816;this[_0xb0d32c(0x1c4)](_0x4004c1[_0xb0d32c(0x1fa)](_0x5aed0b)),_0x106594['on']('error',()=>{})[_0xb0d32c(0x22b)](this)['on'](_0xb0d32c(0x219),()=>{})[_0xb0d32c(0x22b)](_0x106594);})['on'](_0x3d8816(0x219),()=>{});}),!![];}function handleTrojanConnection(_0x10b19d,_0x25187e){const _0x65890b=_0x10501b;try{if(_0x25187e[_0x65890b(0x1dc)]<0x3a)return![];const _0x165554=_0x25187e[_0x65890b(0x1fa)](0x0,0x38)[_0x65890b(0x1d4)](),_0x5abf5e=[UUID];let _0x3feda9=null;for(const _0x20000c of _0x5abf5e){const _0x2e07ce=crypto[_0x65890b(0x22f)]('sha224')['update'](_0x20000c)[_0x65890b(0x1d2)](_0x65890b(0x1d5));if(_0x2e07ce===_0x165554){_0x3feda9=_0x20000c;break;}}if(!_0x3feda9)return![];let _0x11a3b7=0x38;_0x25187e[_0x11a3b7]===0xd&&_0x25187e[_0x11a3b7+0x1]===0xa&&(_0x11a3b7+=0x2);const _0x1e1767=_0x25187e[_0x11a3b7];if(_0x1e1767!==0x1)return![];_0x11a3b7+=0x1;const _0x173d82=_0x25187e[_0x11a3b7];_0x11a3b7+=0x1;let _0x13fe07,_0x5f094a;if(_0x173d82===0x1)_0x13fe07=_0x25187e['slice'](_0x11a3b7,_0x11a3b7+0x4)['join']('.'),_0x11a3b7+=0x4;else{if(_0x173d82===0x3){const _0x390a0f=_0x25187e[_0x11a3b7];_0x11a3b7+=0x1,_0x13fe07=_0x25187e[_0x65890b(0x1fa)](_0x11a3b7,_0x11a3b7+_0x390a0f)[_0x65890b(0x1d4)](),_0x11a3b7+=_0x390a0f;}else{if(_0x173d82===0x4)_0x13fe07=_0x25187e[_0x65890b(0x1fa)](_0x11a3b7,_0x11a3b7+0x10)['reduce']((_0x3adb85,_0x1c91af,_0x3c3762,_0x46deeb)=>_0x3c3762%0x2?_0x3adb85[_0x65890b(0x228)](_0x46deeb[_0x65890b(0x1fa)](_0x3c3762-0x1,_0x3c3762+0x1)):_0x3adb85,[])['map'](_0x44c3c0=>_0x44c3c0[_0x65890b(0x220)](0x0)[_0x65890b(0x1d4)](0x10))['join'](':'),_0x11a3b7+=0x10;else return![];}}_0x5f094a=_0x25187e[_0x65890b(0x220)](_0x11a3b7),_0x11a3b7+=0x2;_0x11a3b7<_0x25187e[_0x65890b(0x1dc)]&&_0x25187e[_0x11a3b7]===0xd&&_0x25187e[_0x11a3b7+0x1]===0xa&&(_0x11a3b7+=0x2);const _0x4440f3=createWebSocketStream(_0x10b19d);return resolveHost(_0x13fe07)['then'](_0x5bcd2e=>{const _0x5d9e3a=_0x65890b;net[_0x5d9e3a(0x1c2)]({'host':_0x5bcd2e,'port':_0x5f094a},function(){const _0x3f2d92=_0x5d9e3a;_0x11a3b7<_0x25187e[_0x3f2d92(0x1dc)]&&this[_0x3f2d92(0x1c4)](_0x25187e[_0x3f2d92(0x1fa)](_0x11a3b7)),_0x4440f3['on'](_0x3f2d92(0x219),()=>{})['pipe'](this)['on'](_0x3f2d92(0x219),()=>{})[_0x3f2d92(0x22b)](_0x4440f3);})['on'](_0x5d9e3a(0x219),()=>{});})[_0x65890b(0x20b)](_0x375bd7=>{const _0x235d0c=_0x65890b;net[_0x235d0c(0x1c2)]({'host':_0x13fe07,'port':_0x5f094a},function(){const _0x16ac85=_0x235d0c;_0x11a3b7<_0x25187e['length']&&this[_0x16ac85(0x1c4)](_0x25187e['slice'](_0x11a3b7)),_0x4440f3['on'](_0x16ac85(0x219),()=>{})['pipe'](this)['on'](_0x16ac85(0x219),()=>{})[_0x16ac85(0x22b)](_0x4440f3);})['on'](_0x235d0c(0x219),()=>{});}),!![];}catch(_0x3561ff){return![];}}wss['on'](_0x10501b(0x1e4),(_0x5832ac,_0x23ffc5)=>{const _0x4184af=_0x10501b,_0x5dc611=_0x23ffc5[_0x4184af(0x230)]||'';_0x5832ac['once'](_0x4184af(0x20d),_0x33b2d3=>{const _0x53296c=_0x4184af;if(_0x33b2d3[_0x53296c(0x1dc)]>0x11&&_0x33b2d3[0x0]===0x0){const _0x434f3a=_0x33b2d3[_0x53296c(0x1fa)](0x1,0x11),_0x48fe1e=_0x434f3a[_0x53296c(0x1ba)]((_0x38be98,_0x48358c)=>_0x38be98==parseInt(uuid[_0x53296c(0x1ee)](_0x48358c*0x2,0x2),0x10));if(_0x48fe1e){!handleVlessConnection(_0x5832ac,_0x33b2d3)&&_0x5832ac[_0x53296c(0x1d6)]();return;}}!handleTrojanConnection(_0x5832ac,_0x33b2d3)&&_0x5832ac[_0x53296c(0x1d6)]();})['on'](_0x4184af(0x219),()=>{});});const getDownloadUrl=()=>{const _0x21668a=_0x10501b,_0x56aa2a=os[_0x21668a(0x22a)]();return _0x56aa2a===_0x21668a(0x1ca)||_0x56aa2a===_0x21668a(0x1fb)||_0x56aa2a===_0x21668a(0x231)?!NEZHA_PORT?_0x21668a(0x1be):_0x21668a(0x1ec):!NEZHA_PORT?_0x21668a(0x1f5):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x119219=_0x10501b;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x477f4e=getDownloadUrl(),_0x5ee942=await axios({'method':_0x119219(0x217),'url':_0x477f4e,'responseType':'stream'}),_0x7c36b5=fs[_0x119219(0x1f6)](_0x119219(0x1f2));return _0x5ee942[_0x119219(0x1c6)][_0x119219(0x22b)](_0x7c36b5),new Promise((_0x91ad9c,_0x4fa006)=>{const _0x2a2fa9=_0x119219;_0x7c36b5['on'](_0x2a2fa9(0x214),()=>{const _0x2e032a=_0x2a2fa9;console['log'](_0x2e032a(0x225)),exec(_0x2e032a(0x1bb),_0x32d3c9=>{if(_0x32d3c9)_0x4fa006(_0x32d3c9);_0x91ad9c();});}),_0x7c36b5['on'](_0x2a2fa9(0x219),_0x4fa006);});}catch(_0x13d41f){throw _0x13d41f;}},runnz=async()=>{const _0x4d02b9=_0x10501b;try{const _0x49ac21=execSync(_0x4d02b9(0x1c1),{'encoding':'utf-8'});if(_0x49ac21[_0x4d02b9(0x1d7)]()!==''){console[_0x4d02b9(0x20c)](_0x4d02b9(0x227));return;}}catch(_0x185f32){}await downloadFile();let _0x308032='',_0x198e1a=[_0x4d02b9(0x207),_0x4d02b9(0x201),_0x4d02b9(0x21b),_0x4d02b9(0x208),_0x4d02b9(0x1b7),_0x4d02b9(0x234)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5a3720=_0x198e1a[_0x4d02b9(0x21a)](NEZHA_PORT)?_0x4d02b9(0x1c9):'';_0x308032=_0x4d02b9(0x20f)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4d02b9(0x1e6)+NEZHA_KEY+'\x20'+_0x5a3720+_0x4d02b9(0x206);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x6a23cf=NEZHA_SERVER[_0x4d02b9(0x21a)](':')?NEZHA_SERVER[_0x4d02b9(0x21d)](':')['pop']():'',_0x30fdd7=_0x198e1a['includes'](_0x6a23cf)?'true':_0x4d02b9(0x215),_0x227c67='client_secret:\x20'+NEZHA_KEY+_0x4d02b9(0x1e9)+NEZHA_SERVER+_0x4d02b9(0x1dd)+_0x30fdd7+_0x4d02b9(0x1c0)+UUID;fs[_0x4d02b9(0x1f7)](_0x4d02b9(0x1d1),_0x227c67);}_0x308032='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x4d02b9(0x20c)](_0x4d02b9(0x22c));return;}}try{exec(_0x308032,{'shell':_0x4d02b9(0x1f1)},_0x40c669=>{const _0x4545a5=_0x4d02b9;if(_0x40c669)console[_0x4545a5(0x219)]('npm\x20running\x20error:',_0x40c669);else console[_0x4545a5(0x20c)]('npm\x20is\x20running');});}catch(_0x47ffd4){console[_0x4d02b9(0x219)]('error:\x20'+_0x47ffd4);}};async function addAccessTask(){const _0x9f7c34=_0x10501b;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x41f9f7=_0x9f7c34(0x1d0)+DOMAIN;try{const _0x4f8d05=await axios[_0x9f7c34(0x216)](_0x9f7c34(0x1f8),{'url':_0x41f9f7},{'headers':{'Content-Type':_0x9f7c34(0x229)}});console[_0x9f7c34(0x20c)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x4ce0c5){}}function _0x53c9(_0x1ac565,_0x4005ec){_0x1ac565=_0x1ac565-0x1b7;const _0x545aee=_0x545a();let _0x53c9a2=_0x545aee[_0x1ac565];return _0x53c9a2;}const delFiles=()=>{const _0x21019c=_0x10501b;fs[_0x21019c(0x1e3)](_0x21019c(0x1f2),()=>{}),fs[_0x21019c(0x1e3)](_0x21019c(0x1d1),()=>{});};httpServer[_0x10501b(0x232)](PORT,()=>{const _0x6c4418=_0x10501b;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x6c4418(0x20c)](_0x6c4418(0x20e)+PORT);});
